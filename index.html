<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Helium JS</title><meta name="description" content="Documentation for Helium JS"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Helium JS</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> Helium JS</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><p align="center">
  <img width="120" height="120" src="https://raw.githubusercontent.com/helium/helium-js/master/icon.png">
</p>


<a href="#helium-js-sdk" id="helium-js-sdk" style="color: inherit; text-decoration: none;">
  <h1>Helium JS SDK</h1>
</a>
<p><a href="https://travis-ci.com/helium/helium-js"><img src="https://travis-ci.com/helium/helium-js.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/github/helium/helium-js?branch=master"><img src="https://coveralls.io/repos/github/helium/helium-js/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://renovatebot.com"><img src="https://img.shields.io/badge/renovate-enabled-brightgreen.svg" alt="Renovate"></a></p>
<p>Please view the <a href="https://helium.github.io/helium-js/">Documentation</a> for usage and examples.</p>
<blockquote>
<p>⚠️ These libraries are currently in active development and are provided as-is. Helium makes no claims or guarantees about the correctness, reliability or security of this code. PRs welcome, see <a href="https://github.com/helium/helium-js/blob/master/CONTRIBUTING.md">CONTRIBUTING</a>.</p>
</blockquote>
<p>This SDK is a collection of TypeScrypt libraries for interacting with the Helium blockchain. For additional documentation about the Helium network, visit the <a href="https://docs.helium.com/">Developer Site</a>.</p>
<table>
<thead>
<tr>
<th>Package</th>
<th>NPM Version</th>
<th>What it&#39;s for</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/crypto"><code>@helium/crypto</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/crypto" alt="npm"></td>
<td>Cryptography utilities including keypairs, mnemonics and base58-check encoding</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/crypto-react-native"><code>@helium/crypto-react-native</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/crypto-react-native" alt="npm"></td>
<td>Cryptography utilities following the same interface as <code>@helium/crypto</code> but for React Native</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/transactions"><code>@helium/transactions</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/transactions" alt="npm"></td>
<td>Construct and serialize transaction primitives from their <a href="https://developers.google.com/protocol-buffers">protobuf</a> definitions</td>
</tr>
<tr>
<td><a href="https://github.com/helium/proto"><code>@helium/proto</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/proto" alt="npm"></td>
<td>Protobuf definitions for Helium transactions</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/proto-ble"><code>@helium/proto-ble</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/proto-ble" alt="npm"></td>
<td>Protobuf definitions for Helium Hotspot ble transactions</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/http"><code>@helium/http</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/http" alt="npm"></td>
<td>An HTTP client for the blockchain REST API</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/currency"><code>@helium/currency</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/currency" alt="npm"></td>
<td>Utilities for representing amounts of the different currencies supported by Helium</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/onboarding"><code>@helium/onboarding</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/onboarding" alt="npm"></td>
<td>An HTTP client for interfacing with an Onboarding Server</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/address"><code>@helium/address</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/address" alt="npm"></td>
<td>Utilities for Helium Addresses</td>
</tr>
<tr>
<td><a href="https://github.com/helium/helium-js/tree/master/packages/wallet-link"><code>@helium/wallet-link</code></a></td>
<td><img src="https://img.shields.io/npm/v/@helium/wallet-link" alt="npm"></td>
<td>Utilities for linking a 3rd party app to the Helium Wallet</td>
</tr>
</tbody></table>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<p>Each package can be installed independently depending on what utility you need. For example:</p>
<pre><code class="language-shell"><span class="hl-0">$ yarn add @helium/crypto @helium/transactions @helium/http</span><br/><span class="hl-1"># or</span><br/><span class="hl-0">$ npm install @helium/crypto @helium/transactions @helium/http</span>
</code></pre>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p>The following examples demonstrate some of the more common use cases and show how these packages can be used in combination to accomplish common tasks.</p>

<a href="#creating-and-submitting-a-payment-transaction" id="creating-and-submitting-a-payment-transaction" style="color: inherit; text-decoration: none;">
  <h3>Creating and submitting a payment transaction</h3>
</a>
<p>A payment from an owned keypair initialized with a 12 word mnemonic to an address specified by its base58 representation. The transaction is serialized to binary and submitted to the blockchain API.</p>
<pre><code class="language-js"><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Keypair</span><span class="hl-0">, </span><span class="hl-3">Address</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/crypto&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">PaymentV1</span><span class="hl-0">, </span><span class="hl-3">Transaction</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/transactions&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Client</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/http&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">client</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">Client</span><span class="hl-0">()</span><br/><br/><span class="hl-1">// the transactions library needs to be configured</span><br/><span class="hl-1">// with the latest chain vars in order to calcluate fees</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">vars</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">vars</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">()</span><br/><span class="hl-3">Transaction</span><span class="hl-0">.</span><span class="hl-7">config</span><span class="hl-0">(</span><span class="hl-3">vars</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// initialize an owned keypair from a 12 word mnemonic</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">bob</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">Keypair</span><span class="hl-0">.</span><span class="hl-7">fromWords</span><span class="hl-0">([</span><span class="hl-4">&#39;one&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;two&#39;</span><span class="hl-0">, ..., </span><span class="hl-4">&#39;twelve&#39;</span><span class="hl-0">])</span><br/><br/><span class="hl-1">// initialize an address from a b58 string</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">alice</span><span class="hl-0"> = </span><span class="hl-3">Address</span><span class="hl-0">.</span><span class="hl-7">fromB58</span><span class="hl-0">(</span><span class="hl-4">&#39;148d8KTRcKA5JKPekBcKFd4KfvprvFRpjGtivhtmRmnZ8MFYnP3&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// get the speculative nonce for the keypair</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">account</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">accounts</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">(</span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">.</span><span class="hl-3">b58</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// construct a payment txn</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">paymentTxn</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">PaymentV1</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">payee:</span><span class="hl-0"> </span><span class="hl-3">alice</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">amount:</span><span class="hl-0"> </span><span class="hl-8">10</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">nonce:</span><span class="hl-0"> </span><span class="hl-3">account</span><span class="hl-0">.</span><span class="hl-3">speculativeNonce</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">,</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">// an appropriate transaction fee is calculated at initialization</span><br/><span class="hl-3">console</span><span class="hl-0">.</span><span class="hl-7">log</span><span class="hl-0">(</span><span class="hl-4">&#39;transaction fee is:&#39;</span><span class="hl-0">, </span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-3">fee</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// sign the payment txn with bob&#39;s keypair</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">signedPaymentTxn</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-7">sign</span><span class="hl-0">({ </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0"> })</span><br/><br/><span class="hl-1">// submit the serialized txn to the Blockchain HTTP API</span><br/><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">transactions</span><span class="hl-0">.</span><span class="hl-7">submit</span><span class="hl-0">(</span><span class="hl-3">signedPaymentTxn</span><span class="hl-0">.</span><span class="hl-7">toString</span><span class="hl-0">())</span>
</code></pre>

<a href="#creating-an-advanced-payment-transaction" id="creating-an-advanced-payment-transaction" style="color: inherit; text-decoration: none;">
  <h3>Creating an advanced payment transaction</h3>
</a>
<p>PaymentV2 transactions allow for specifying multiple recipients in the same transaction.</p>
<pre><code class="language-js"><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Keypair</span><span class="hl-0">, </span><span class="hl-3">Address</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/crypto&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">PaymentV2</span><span class="hl-0">, </span><span class="hl-3">Transaction</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/transactions&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Client</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/http&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">client</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">Client</span><span class="hl-0">()</span><br/><br/><span class="hl-1">// the transactions library needs to be configured</span><br/><span class="hl-1">// with the latest chain vars in order to calcluate fees</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">vars</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">vars</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">()</span><br/><span class="hl-3">Transaction</span><span class="hl-0">.</span><span class="hl-7">config</span><span class="hl-0">(</span><span class="hl-3">vars</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// initialize an owned keypair from a 12 word mnemonic</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">bob</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">Keypair</span><span class="hl-0">.</span><span class="hl-7">fromWords</span><span class="hl-0">([</span><span class="hl-4">&#39;one&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;two&#39;</span><span class="hl-0">, ..., </span><span class="hl-4">&#39;twelve&#39;</span><span class="hl-0">])</span><br/><br/><span class="hl-1">// get the speculative nonce for the keypair</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">account</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">accounts</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">(</span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">.</span><span class="hl-3">b58</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// initialize recipient addresses from b58 strings</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">alice</span><span class="hl-0"> = </span><span class="hl-3">Address</span><span class="hl-0">.</span><span class="hl-7">fromB58</span><span class="hl-0">(</span><span class="hl-4">&#39;148d8KTRcKA5JKPekBcKFd4KfvprvFRpjGtivhtmRmnZ8MFYnP3&#39;</span><span class="hl-0">)</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">charlie</span><span class="hl-0"> = </span><span class="hl-3">Address</span><span class="hl-0">.</span><span class="hl-7">fromB58</span><span class="hl-0">(</span><span class="hl-4">&#39;13JoEpkGQUd8bzn2BquFZe1CbmfzhL4cYpEohWH71yxy7cEY59Z&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// construct a PaymentV2 txn</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">paymentTxn</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">PaymentV2</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">payments:</span><span class="hl-0"> [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-3">payee:</span><span class="hl-0"> </span><span class="hl-3">alice</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">amount:</span><span class="hl-0"> </span><span class="hl-8">20</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-3">payee:</span><span class="hl-0"> </span><span class="hl-3">charlie</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">amount:</span><span class="hl-0"> </span><span class="hl-8">10</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-3">nonce:</span><span class="hl-0"> </span><span class="hl-3">account</span><span class="hl-0">.</span><span class="hl-3">speculativeNonce</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">,</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">// an appropriate transaction fee is calculated at initialization</span><br/><span class="hl-3">console</span><span class="hl-0">.</span><span class="hl-7">log</span><span class="hl-0">(</span><span class="hl-4">&#39;transaction fee is:&#39;</span><span class="hl-0">, </span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-3">fee</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// sign the payment txn with bob&#39;s keypair</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">signedPaymentTxn</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-7">sign</span><span class="hl-0">({ </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0"> })</span><br/><br/><span class="hl-1">// submit the serialized txn to the Blockchain HTTP API</span><br/><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">transactions</span><span class="hl-0">.</span><span class="hl-7">submit</span><span class="hl-0">(</span><span class="hl-3">signedPaymentTxn</span><span class="hl-0">.</span><span class="hl-7">toString</span><span class="hl-0">())</span>
</code></pre>

<a href="#sending-an-account39s-full-balance" id="sending-an-account39s-full-balance" style="color: inherit; text-decoration: none;">
  <h3>Sending an Account&#39;s full balance</h3>
</a>
<p>Sending the maximum amount from an account (leaving a 0 HNT balance) requires taking into account the transaction fee. All fees are denominated in Data Credits (DC), which is equal to $0.00001 USD, meaning 35,000 DC equals $0.35 USD. DC are obtained by <em>burning</em> HNT, permanently removing it from circulation. If you do not already have DC in your account, the appropriate amount of HNT will be burned to cover the fee.</p>
<p>The general formula is:
<code>amountToSend = balance - feeInHNT</code></p>
<p>The packages in helium-js provide utility functions to calculate the above:</p>
<pre><code class="language-js"><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Keypair</span><span class="hl-0">, </span><span class="hl-3">Address</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/crypto&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">PaymentV2</span><span class="hl-0">, </span><span class="hl-3">Transaction</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/transactions&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Client</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/http&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Balance</span><span class="hl-0">, </span><span class="hl-3">CurrencyType</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/currency&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">client</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">Client</span><span class="hl-0">()</span><br/><br/><span class="hl-1">// the transactions library needs to be configured</span><br/><span class="hl-1">// with the latest chain vars in order to calcluate fees</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">vars</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">vars</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">()</span><br/><span class="hl-3">Transaction</span><span class="hl-0">.</span><span class="hl-7">config</span><span class="hl-0">(</span><span class="hl-3">vars</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// assuming bob has a balance of 100 HNT</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">bob</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">Keypair</span><span class="hl-0">.</span><span class="hl-7">fromWords</span><span class="hl-0">([</span><span class="hl-4">&#39;one&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;two&#39;</span><span class="hl-0">, ..., </span><span class="hl-4">&#39;twelve&#39;</span><span class="hl-0">])</span><br/><br/><span class="hl-1">// initialize an address from a b58 string</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">alice</span><span class="hl-0"> = </span><span class="hl-3">Address</span><span class="hl-0">.</span><span class="hl-7">fromB58</span><span class="hl-0">(</span><span class="hl-4">&#39;148d8KTRcKA5JKPekBcKFd4KfvprvFRpjGtivhtmRmnZ8MFYnP3&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// get the speculative nonce for the keypair</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">account</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">accounts</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">(</span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">.</span><span class="hl-3">b58</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// construct a PaymentV2 txn for the purpose</span><br/><span class="hl-1">// of calculating the fee</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">paymentTxnForFee</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">PaymentV2</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">payments:</span><span class="hl-0"> [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-3">payee:</span><span class="hl-0"> </span><span class="hl-3">alice</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">amount:</span><span class="hl-0"> </span><span class="hl-3">account</span><span class="hl-0">.</span><span class="hl-3">balance</span><span class="hl-0">.</span><span class="hl-3">integerBalance</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-3">nonce:</span><span class="hl-0"> </span><span class="hl-3">account</span><span class="hl-0">.</span><span class="hl-3">speculativeNonce</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">,</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">// calculate max sendable amount</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">feeInDC</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">Balance</span><span class="hl-0">(</span><span class="hl-3">paymentTxnForFee</span><span class="hl-0">.</span><span class="hl-3">fee</span><span class="hl-0">, </span><span class="hl-3">CurrencyType</span><span class="hl-0">.</span><span class="hl-3">dataCredit</span><span class="hl-0">)</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">oracle</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">oracle</span><span class="hl-0">.</span><span class="hl-7">getCurrentPrice</span><span class="hl-0">()</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">feeInHNT</span><span class="hl-0"> = </span><span class="hl-3">feeInDC</span><span class="hl-0">.</span><span class="hl-7">toNetworkTokens</span><span class="hl-0">(</span><span class="hl-3">oracle</span><span class="hl-0">.</span><span class="hl-3">price</span><span class="hl-0">)</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">amountToSend</span><span class="hl-0"> = </span><span class="hl-3">account</span><span class="hl-0">.</span><span class="hl-3">balance</span><span class="hl-0">.</span><span class="hl-7">minus</span><span class="hl-0">(</span><span class="hl-3">feeInHNT</span><span class="hl-0">).</span><span class="hl-3">integerBalance</span><br/><br/><span class="hl-1">// construct a PaymentV2 txn to sign</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">paymentTxnForFee</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">PaymentV2</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">payments:</span><span class="hl-0"> [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-3">payee:</span><span class="hl-0"> </span><span class="hl-3">alice</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">amount:</span><span class="hl-0"> </span><span class="hl-3">amountToSend</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-3">nonce:</span><span class="hl-0"> </span><span class="hl-3">account</span><span class="hl-0">.</span><span class="hl-3">speculativeNonce</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">,</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">// sign the payment txn with bob&#39;s keypair</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">signedPaymentTxn</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-7">sign</span><span class="hl-0">({ </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0"> })</span><br/><br/><span class="hl-1">// submit the serialized txn to the Blockchain HTTP API</span><br/><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">transactions</span><span class="hl-0">.</span><span class="hl-7">submit</span><span class="hl-0">(</span><span class="hl-3">signedPaymentTxn</span><span class="hl-0">.</span><span class="hl-7">toString</span><span class="hl-0">())</span><br/>
</code></pre>
<blockquote>
<p>⚠️ Note that oracle prices change over time. It&#39;s possible for a transaction to fail if the oracle price changes in between the time the transaction is constructed and when it is absorbed by the consensus group. The API exposes what the next oracle price will be at <code>https://api.helium.io /v1/oracle/predictions</code>. See <a href="https://developer.helium.com/blockchain/api/oracle">https://developer.helium.com/blockchain/api/oracle</a> for more details. To avoid failed transactions, it may be worth querying both the oracle predictions, and the current oracle value, and taking the greatest of those values.</p>
</blockquote>

<a href="#sending-payment-from-multi-signature-wallet" id="sending-payment-from-multi-signature-wallet" style="color: inherit; text-decoration: none;">
  <h3>Sending payment from multi-signature wallet</h3>
</a>
<p>Sending a payment from a multi-signature wallet requires collecting the minimum number of required signatures from the addresses associated with the multi-signature address in question. Below is an example of creating and signing a 1 of 2 multi-signature address transaction.</p>
<pre><code class="language-js"><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Keypair</span><span class="hl-0">, </span><span class="hl-3">MultisigSignature</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/crypto&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> </span><span class="hl-3">Address</span><span class="hl-0">, { </span><span class="hl-3">MultisigAddress</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/address&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">PaymentV2</span><span class="hl-0">, </span><span class="hl-3">Transaction</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/transactions&#39;</span><br/><span class="hl-2">import</span><span class="hl-0"> { </span><span class="hl-3">Client</span><span class="hl-0"> } </span><span class="hl-2">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@helium/http&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">client</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">Client</span><span class="hl-0">()</span><br/><br/><span class="hl-1">// the transactions library needs to be configured</span><br/><span class="hl-1">// with the latest chain vars in order to calcluate fees</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">vars</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">vars</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">()</span><br/><span class="hl-3">Transaction</span><span class="hl-0">.</span><span class="hl-7">config</span><span class="hl-0">(</span><span class="hl-3">vars</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// initialize a keypair available for signing</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">bob</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">Keypair</span><span class="hl-0">.</span><span class="hl-7">fromWords</span><span class="hl-0">([</span><span class="hl-4">&#39;one&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;two&#39;</span><span class="hl-0">, ..., </span><span class="hl-4">&#39;twelve&#39;</span><span class="hl-0">])</span><br/><br/><span class="hl-1">// initialize an address from a b58 string</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">alice</span><span class="hl-0"> = </span><span class="hl-3">Address</span><span class="hl-0">.</span><span class="hl-7">fromB58</span><span class="hl-0">(</span><span class="hl-4">&#39;148d8KTRcKA5JKPekBcKFd4KfvprvFRpjGtivhtmRmnZ8MFYnP3&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// initialize multisig address with the full set of addreses and required number of signatures</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">multisigAddress</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">MultisigAddress</span><span class="hl-0">.</span><span class="hl-7">create</span><span class="hl-0">([</span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">, </span><span class="hl-3">alice</span><span class="hl-0">], </span><span class="hl-8">1</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// get the speculative nonce for the multisig keypair</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">account</span><span class="hl-0"> = </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">accounts</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">(</span><span class="hl-3">multisigAddress</span><span class="hl-0">.</span><span class="hl-3">b58</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// create random payee address</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">payeeAddress</span><span class="hl-0"> = </span><span class="hl-3">Address</span><span class="hl-0">.</span><span class="hl-7">fromB58</span><span class="hl-0">(</span><span class="hl-4">&#39;13dSybmfNofup3rBGat2poGfuab4BhYZNKUJFczSi4jcwLmoXvD&#39;</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// construct a PaymentV2 txn to sign</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">paymentTxn</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">PaymentV2</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">multisigAddress</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">payments:</span><span class="hl-0"> [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-3">payee:</span><span class="hl-0"> </span><span class="hl-3">payeeAddress</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">amount:</span><span class="hl-0"> </span><span class="hl-3">amountToSend</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  </span><span class="hl-3">nonce:</span><span class="hl-0"> </span><span class="hl-3">account</span><span class="hl-0">.</span><span class="hl-3">speculativeNonce</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">,</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-1">// Create signatures payload, a map of address to signature, and finally a KeySignature list</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">bobSignature</span><span class="hl-0"> = (</span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-7">sign</span><span class="hl-0">({ </span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0"> })).</span><span class="hl-3">signature</span><span class="hl-0"> || </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-9">Uint8Array</span><span class="hl-0">()</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">signatureMap</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-9">Map</span><span class="hl-0">([[</span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">, </span><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-7">sign</span><span class="hl-0">(</span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-7">serialize</span><span class="hl-0">())]])</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">signatures</span><span class="hl-0"> = </span><span class="hl-3">KeySignature</span><span class="hl-0">.</span><span class="hl-7">fromMap</span><span class="hl-0">([</span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">, </span><span class="hl-3">aliceAddress</span><span class="hl-0">], </span><span class="hl-3">signatureMap</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// Construct multisig signature using the address, the full set of all addresses, and the required signatures</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">multisigSig</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">MultisigSignature</span><span class="hl-0">([</span><span class="hl-3">bob</span><span class="hl-0">.</span><span class="hl-3">address</span><span class="hl-0">, </span><span class="hl-3">aliceAddress</span><span class="hl-0">], </span><span class="hl-3">signatures</span><span class="hl-0">)</span><br/><br/><span class="hl-1">// Update signature on payment trasnaction</span><br/><span class="hl-2">await</span><span class="hl-0"> </span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-7">sign</span><span class="hl-0">({</span><span class="hl-3">payer:</span><span class="hl-0"> </span><span class="hl-3">multisigSig</span><span class="hl-0">})</span><br/><br/><span class="hl-1">// submit the serialized txn to the Blockchain HTTP API</span><br/><span class="hl-3">client</span><span class="hl-0">.</span><span class="hl-3">transactions</span><span class="hl-0">.</span><span class="hl-7">submit</span><span class="hl-0">(</span><span class="hl-3">paymentTxn</span><span class="hl-0">.</span><span class="hl-7">toString</span><span class="hl-0">())</span><br/>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/address.html">address</a></li><li class=" tsd-kind-module"><a href="modules/crypto.html">crypto</a></li><li class=" tsd-kind-module"><a href="modules/crypto_react_native.html">crypto-<wbr/>react-<wbr/>native</a></li><li class=" tsd-kind-module"><a href="modules/currency.html">currency</a></li><li class=" tsd-kind-module"><a href="modules/http.html">http</a></li><li class=" tsd-kind-module"><a href="modules/onboarding.html">onboarding</a></li><li class=" tsd-kind-module"><a href="modules/proto_ble_build.html">proto-<wbr/>ble/build</a></li><li class=" tsd-kind-module"><a href="modules/transactions.html">transactions</a></li><li class=" tsd-kind-module"><a href="modules/wallet_link.html">wallet-<wbr/>link</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li><li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>